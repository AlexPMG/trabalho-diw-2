<!DOCTYPE html>
<html lang="pt-BR">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Pokewiki - Cadastro</title>
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css">
  <style>
    body { 
      background-color: #f5faff; 
      font-family: Arial, sans-serif; 
      padding-top: 80px; 
    }

    .cadastro-container {
      max-width: 500px;
      margin: 0 auto;
      padding: 40px 30px;
      background: white;
      border-radius: 15px;
      box-shadow: 0 8px 25px rgba(0,0,0,0.1);
    }

    .pokemon-logo {
      text-align: center;
      margin-bottom: 30px;
    }

    .pokemon-logo h2 {
      color: #ff0000;
      font-weight: bold;
      margin-bottom: 5px;
    }

    .pokemon-logo p {
      color: #666;
    }

    .form-control:focus {
      border-color: #007bff;
      box-shadow: 0 0 0 0.2rem rgba(0,123,255,0.25);
    }

    .btn-cadastro {
      background: linear-gradient(45deg, #28a745, #20c997);
      border: none;
      padding: 12px;
      font-weight: bold;
      transition: transform 0.3s ease;
    }

    .btn-cadastro:hover {
      transform: translateY(-2px);
      box-shadow: 0 5px 15px rgba(40,167,69,0.3);
    }

    .links {
      text-align: center;
      margin-top: 20px;
    }

    .links a {
      color: #007bff;
      text-decoration: none;
      transition: color 0.3s ease;
    }

    .links a:hover {
      color: #0056b3;
      text-decoration: underline;
    }

    footer { 
      background-color: #222; 
      color: #fff; 
      text-align: center; 
      padding: 1rem; 
      margin-top: 3rem; 
    }

    .password-strength {
      height: 5px;
      margin-top: 5px;
      border-radius: 2px;
      transition: all 0.3s ease;
    }

    .strength-weak { background-color: #dc3545; width: 25%; }
    .strength-medium { background-color: #ffc107; width: 50%; }
    .strength-strong { background-color: #28a745; width: 75%; }
    .strength-very-strong { background-color: #20c997; width: 100%; }

    .progress-container {
      margin-top: 10px;
    }

    .progress-bar {
      height: 5px;
      border-radius: 2px;
    }

    .pokemon-icon {
      display: inline-block;
      width: 60px;
      height: 60px;
      background: linear-gradient(45deg, #ff0000, #007bff);
      border-radius: 15px;
      position: relative;
      margin-bottom: 15px;
      transform: rotate(45deg);
    }

    .pokemon-icon::before {
      content: '';
      position: absolute;
      top: 10px;
      left: 10px;
      width: 20px;
      height: 20px;
      background: white;
      border-radius: 50%;
    }

    .pokemon-icon::after {
      content: '';
      position: absolute;
      bottom: 10px;
      right: 10px;
      width: 15px;
      height: 15px;
      background: white;
      border-radius: 50%;
    }
  </style>
</head>
<body>
  <nav class="navbar navbar-expand-lg navbar-light bg-white fixed-top border-bottom shadow-sm">
    <div class="container">
      <a class="navbar-brand" href="index.html">
        <i class="bi bi-diamond-half text-danger"></i> Pokewiki
      </a>
      <a href="index.html" class="btn btn-outline-primary ms-auto">
        <i class="bi bi-house"></i> Voltar para Home
      </a>
    </div>
  </nav>

  <main class="container">
    <div class="cadastro-container">
      <div class="pokemon-logo">
        <div class="pokemon-icon"></div>
        <h2>Criar Conta</h2>
        <p>Junte-se à comunidade Pokewiki</p>
      </div>

      <form id="cadastroForm">
        <div class="row">
          <div class="col-md-6 mb-3">
            <label for="nome" class="form-label">
              <i class="bi bi-person"></i> Nome
            </label>
            <input type="text" class="form-control" id="nome" placeholder="Seu nome completo" required>
          </div>

          <div class="col-md-6 mb-3">
            <label for="apelido" class="form-label">
              <i class="bi bi-person-badge"></i> Apelido
            </label>
            <input type="text" class="form-control" id="apelido" placeholder="Como quer ser chamado">
          </div>
        </div>

        <div class="mb-3">
          <label for="email" class="form-label">
            <i class="bi bi-envelope"></i> Email
          </label>
          <input type="email" class="form-control" id="email" placeholder="seu@email.com" required>
          <div class="form-text">Usaremos este email para login</div>
        </div>

        <div class="mb-3">
          <label for="dataNascimento" class="form-label">
            <i class="bi bi-calendar"></i> Data de Nascimento
          </label>
          <input type="date" class="form-control" id="dataNascimento" required>
        </div>

        <div class="mb-3">
          <label for="senha" class="form-label">
            <i class="bi bi-lock"></i> Senha
          </label>
          <input type="password" class="form-control" id="senha" placeholder="Mínimo 6 caracteres" required minlength="6">
          <div class="progress-container">
            <div id="passwordStrength" class="password-strength"></div>
          </div>
          <div class="form-text">
            Use letras maiúsculas, minúsculas, números e símbolos
          </div>
        </div>

        <div class="mb-3">
          <label for="confirmarSenha" class="form-label">
            <i class="bi bi-lock-fill"></i> Confirmar Senha
          </label>
          <input type="password" class="form-control" id="confirmarSenha" placeholder="Digite a senha novamente" required>
        </div>

        <div class="mb-3">
          <label class="form-label">
            <i class="bi bi-heart"></i> Pokémon Favorito
          </label>
          <select class="form-select" id="pokemonFavorito">
            <option value="">Selecione seu Pokémon favorito</option>
            <option value="1">Bulbasaur</option>
            <option value="2">Charmander</option>
            <option value="3">Squirtle</option>
            <option value="4">Chikorita</option>
            <option value="5">Cyndaquil</option>
            <option value="6">Totodile</option>
          </select>
        </div>

        <div class="mb-3 form-check">
          <input type="checkbox" class="form-check-input" id="termos" required>
          <label class="form-check-label" for="termos">
            Eu concordo com os 
            <a href="#" class="text-decoration-none">Termos de Serviço</a> 
            e 
            <a href="#" class="text-decoration-none">Política de Privacidade</a>
          </label>
        </div>

        <div class="mb-3 form-check">
          <input type="checkbox" class="form-check-input" id="newsletter" checked>
          <label class="form-check-label" for="newsletter">
            Desejo receber novidades sobre Pokémon
          </label>
        </div>

        <div class="d-grid gap-2">
          <button type="submit" class="btn btn-cadastro text-white">
            <i class="bi bi-person-check"></i> Criar Conta
          </button>
        </div>

        <div class="text-center mt-4">
          <p class="mb-0">Já tem uma conta?</p>
          <a href="login.html" class="btn btn-outline-primary mt-2">
            <i class="bi bi-box-arrow-in-right"></i> Fazer Login
          </a>
        </div>
      </form>

      <div class="mt-4">
        <div id="mensagem"></div>
      </div>
    </div>

    <section class="mt-5">
      <h2 class="section-title" style="font-size: 1.5rem; font-weight: bold; margin: 2rem 0 1rem; border-left: 5px solid #007bff; padding-left: 10px;">
        Informações do(a) Aluno(a)
      </h2>
      <div class="p-3 bg-white shadow-sm rounded">
        <p><strong>Nome:</strong> Alex Prieto</p>
        <p><strong>Curso:</strong> Análise e Desenvolvimento de Sistemas</p>
        <p><strong>Turma:</strong> Periodo 1, Segundo Semestre 2025, Noite, PUC Minas São Gabriel</p>
        <p><strong>Sobre:</strong> Trabalho prático de DIW, Wikipédia sobre Pokemon.</p>
        <p><strong>Links:</strong> 
          <a href="https://github.com/AlexPMG" class="text-decoration-none text-primary" target="_blank">
            <i class="bi bi-github"></i> GitHub
          </a>
        </p>
      </div>
    </section>
  </main>

  <footer>
    <p>Aluno: Alex Prieto | PUC Minas - São Gabriel</p>
  </footer>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.8/dist/js/bootstrap.bundle.min.js"></script>
  <script>
    // Função para verificar força da senha
    function verificarForcaSenha(senha) {
      const strengthBar = document.getElementById('passwordStrength');
      let strength = 0;
      
      // Critérios
      if (senha.length >= 6) strength++;
      if (senha.match(/[a-z]+/)) strength++;
      if (senha.match(/[A-Z]+/)) strength++;
      if (senha.match(/[0-9]+/)) strength++;
      if (senha.match(/[$@#&!]+/)) strength++;
      
      // Atualiza barra de força
      strengthBar.className = 'password-strength';
      
      if (senha.length === 0) {
        strengthBar.style.width = '0%';
      } else if (strength <= 2) {
        strengthBar.className += ' strength-weak';
      } else if (strength === 3) {
        strengthBar.className += ' strength-medium';
      } else if (strength === 4) {
        strengthBar.className += ' strength-strong';
      } else {
        strengthBar.className += ' strength-very-strong';
      }
    }
    
    // Evento para verificar senha
    document.getElementById('senha').addEventListener('input', (e) => {
      verificarForcaSenha(e.target.value);
    });
    
    // Evento para formulário de cadastro
    document.getElementById('cadastroForm').addEventListener('submit', async (e) => {
      e.preventDefault();
      
      // Coleta dados do formulário
      const nome = document.getElementById('nome').value;
      const apelido = document.getElementById('apelido').value;
      const email = document.getElementById('email').value;
      const dataNascimento = document.getElementById('dataNascimento').value;
      const senha = document.getElementById('senha').value;
      const confirmarSenha = document.getElementById('confirmarSenha').value;
      const pokemonFavorito = document.getElementById('pokemonFavorito').value;
      const termos = document.getElementById('termos').checked;
      const mensagem = document.getElementById('mensagem');
      
      // Limpa mensagens anteriores
      mensagem.innerHTML = '';
      
      // Validações
      const erros = [];
      
      if (!nome.trim()) erros.push('Nome é obrigatório');
      if (!email.trim()) erros.push('Email é obrigatório');
      if (!dataNascimento) erros.push('Data de nascimento é obrigatória');
      if (!senha) erros.push('Senha é obrigatória');
      if (senha !== confirmarSenha) erros.push('As senhas não conferem');
      if (senha.length < 6) erros.push('A senha deve ter no mínimo 6 caracteres');
      if (!termos) erros.push('Você deve aceitar os termos de serviço');
      
      // Calcula idade
      if (dataNascimento) {
        const nascimento = new Date(dataNascimento);
        const hoje = new Date();
        let idade = hoje.getFullYear() - nascimento.getFullYear();
        const mes = hoje.getMonth() - nascimento.getMonth();
        if (mes < 0 || (mes === 0 && hoje.getDate() < nascimento.getDate())) {
          idade--;
        }
        
        if (idade < 13) {
          erros.push('Você deve ter pelo menos 13 anos para se cadastrar');
        }
      }
      
      // Mostra erros se houver
      if (erros.length > 0) {
        mensagem.innerHTML = `
          <div class="alert alert-danger">
            <i class="bi bi-exclamation-triangle"></i>
            <h6 class="alert-heading">Por favor, corrija os seguintes erros:</h6>
            <ul class="mb-0">
              ${erros.map(erro => `<li>${erro}</li>`).join('')}
            </ul>
          </div>
        `;
        return;
      }
      
      // Mostra loading
      const botao = e.target.querySelector('button[type="submit"]');
      const textoOriginal = botao.innerHTML;
      botao.innerHTML = '<i class="bi bi-arrow-repeat spin"></i> Criando conta...';
      botao.disabled = true;
      
      try {
        // Simula cadastro (substitua por sua API real)
        await new Promise(resolve => setTimeout(resolve, 2000));
        
        // Verifica se email já existe
        const usuariosCadastrados = JSON.parse(localStorage.getItem('usuariosPokewiki') || '[]');
        const emailExiste = usuariosCadastrados.some(u => u.email === email);
        
        if (emailExiste) {
          throw new Error('Este email já está cadastrado');
        }
        
        // Cria novo usuário
        const novoUsuario = {
          id: Date.now(),
          nome,
          apelido: apelido || nome.split(' ')[0],
          email,
          dataNascimento,
          pokemonFavorito: pokemonFavorito || null,
          newsletter: document.getElementById('newsletter').checked,
          dataCadastro: new Date().toISOString()
        };
        
        // Salva no localStorage (simulação)
        usuariosCadastrados.push(novoUsuario);
        localStorage.setItem('usuariosPokewiki', JSON.stringify(usuariosCadastrados));
        
        // Faz login automático
        localStorage.setItem('usuarioLogado', JSON.stringify(novoUsuario));
        
        mensagem.innerHTML = `
          <div class="alert alert-success">
            <i class="bi bi-check-circle"></i>
            <h6 class="alert-heading">Conta criada com sucesso!</h6>
            <p>Bem-vindo(a) à Pokewiki, ${apelido || nome.split(' ')[0]}!</p>
            <p class="mb-0">Redirecionando para a página inicial...</p>
          </div>
        `;
        
        // Redireciona após 3 segundos
        setTimeout(() => {
          window.location.href = 'index.html';
        }, 3000);
      } catch (error) {
        mensagem.innerHTML = `
          <div class="alert alert-danger">
            <i class="bi bi-x-circle"></i>
            ${error.message}
          </div>
        `;
      } finally {
        botao.innerHTML = textoOriginal;
        botao.disabled = false;
      }
    });
    
    // Adiciona estilo para spinner
    const style = document.createElement('style');
    style.textContent = `
      .spin {
        animation: spin 1s linear infinite;
      }
      @keyframes spin {
        from { transform: rotate(0deg); }
        to { transform: rotate(360deg); }
      }
    `;
    document.head.appendChild(style);
    
    // Verifica se já está logado
    document.addEventListener('DOMContentLoaded', () => {
      const usuarioLogado = localStorage.getItem('usuarioLogado');
      if (usuarioLogado) {
        // Já está logado, redireciona para home
        window.location.href = 'index.html';
      }
      
      // Define data mínima (13 anos atrás)
      const dataMinima = new Date();
      dataMinima.setFullYear(dataMinima.getFullYear() - 13);
      document.getElementById('dataNascimento').max = dataMinima.toISOString().split('T')[0];
    });
  </script>
</body>
</html>